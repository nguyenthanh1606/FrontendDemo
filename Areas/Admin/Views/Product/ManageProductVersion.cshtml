@model Admin.Models.ManageProductVersionViewModel
@using Store.Service.ProductServices

@using (Ajax.BeginForm("ManageProductVersion", "Product",
    new AjaxOptions { HttpMethod = "Post", InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "product_version",
        OnComplete = "HideModal('#divModal');",
        OnFailure = string.Format("ShowAlertDialog({0})", Resource.UnknowErrorMessage),
        OnBegin = "return ConfirmChangeVersion()"
    }, new { id = "manageversions"}))
{
<div class="modal-dialog modal-lg" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

    <!-- Modal content-->
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">@Resource.ManageProductVersion</h4>
        </div>

        <div class="modal-body">
            <div class="form-horizontal">
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true)

                @Html.HiddenFor(m => m.ProductID)
                @for (int i = 0; i < Model.ListGroupProperties.Count; i++)
                {
                    <div class="form-group">
                        <label class = "control-label col-md-2 col-sm-3 col-xs-12">@Model.ListGroupProperties[i].Name</label>
                        <div class="col-md-10 col-sm-9 col-xs-12">
                            @Html.ListBoxFor(model => model.ListGroupProperties[i].ValueId, Model.ListGroupProperties[i].SelectList,
                                new { @class = string.Format("form-control {0}", Model.ListGroupProperties[i].Type == ProductGroupPropertiesType.Color ? "color_select2" : "ddl_select2")})
                            @Html.ValidationMessageFor(model => model.ListGroupProperties[i].ValueId)
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="modal-footer">
            <button type="submit" class="btn btn-primary">@Resource.Create</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">@Resource.Cancel</button>
        </div>
    </div>
</div>
}

<script>
    var isDirty = false;
    $('#manageversions select').change(function () {
        isDirty = true;
    });
</script>